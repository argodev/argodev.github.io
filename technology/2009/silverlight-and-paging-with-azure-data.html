<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Rob Gillen</title><link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><link rel="stylesheet" href="/assets/site.css"><link rel="stylesheet" href="/assets/academicons.css"></head><body><div id="wrap"><div class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Rob Gillen</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/technology">Technology</a></li><li><a href="/presentations">Presentations/Talks</a></li><li><a href="/papers">Publications/Arcticles</a></li><li><a href="/projects">Projects</a></li><li><a href="/personal">Personal</a></li><li><a href="/about">About</a></li><li><a href="/contact">Contact</a></li><!--li.dropdown--><!--  a.dropdown-toggle(href="#", data-toggle="dropdown") Dropdown <b class="caret"></b>--><!--  ul.dropdown-menu--><!--    li--><!--      a(href="#") Action--><!--    li--><!--      a(href="#") Another action--><!--    li--><!--      a(href="#") Something else here--><!--    li.divider--><!--    li.dropdown-header Nav header--><!--    li--><!--      a(href="#") Separated link--><!--    li--><!--      a(href="#") One more separated link--></ul></div></div></div><div class="container"><div class="page-header"><h1>SilverLight and Paging with Azure Data</h1></div><div class="row"><div class="col-md-9"><div class="panel"><div class="panel-body"><div class="row"><div class="col-md-12"><h5>August 20, 2009</h5><p>If you’ve been watching by blog at all lately, you know that I’ve been <a href="/technology/2009/atompub-json-azure-and-large-datasets-part-2">playing with some larger data sets and Azure
storage</a>, specifically Azure table storage. Last week I
found myself working with a SilverLight application to visualize the resulting data and display it to the user, however
I did not want to use the ADO.NET Data Services client (ATOM) due to the size of data in transmission. Consequently, I
set up a web role that proxied the data calls and fed them back to the caller as JSON. Due to the limitation on Azure
table storage of only returning 1,000 rows at a time, I needed to access the response headers in my SilverLight client
to determine after each request if there were more rows waiting… and that was the rub… every time I tried to access
the response headers collection (tried both with a <code>WebClient</code> and <code>HttpWebRequest</code>), I received a
<code>System.NotImplementedException</code>.</p>
<p>I pounded my head on this for a few days with no success until a helpful twitterer -
<a href="http://twitter.com/silverfighter">@silverfighter</a> - provided me a link that got me rolling. The root of the problem was
my ignorance of how SilverLight’s networking stack functioned. As I (now) understand it, by default any networking calls
(<code>WebClient</code> or <code>HttpWebRequest</code>) are actually handled by the browser and not .NET. This results in you getting access
to only what the browser object hands you, which in my case, did not include the response headers.</p>
<p>The key here is that SilverLight 3 provides you the ability to tell the browser that you’d rather handle those requests
yourself. By simply registering the http protocol (you can actually do it as granular as a site level) as handled by
the Silverlight client, “magic” happens and you suddenly have access to the properties of the <code>WebClient</code>
(<code>ResponseHeaders</code>) and <code>HttpWebRequest</code> (<code>Response.Headers</code>) objects that you would have expected to. The magic line
you need to add prior to issuing any calls is as follows:</p>
<pre><code>bool httpResult = WebRequest.RegisterPrefix(&quot;http://&quot;, WebRequestCreator.ClientHttp);
</code></pre><p>(yes… that’s it…)</p>
<p>The links to the appropriate articles are as follows:</p>
<ul>
<li><a href="http://blogs.msdn.com/carlosfigueira/archive/2009/08/15/fault-support-in-silverlight-3.aspx">http://blogs.msdn.com/carlosfigueira/archive/2009/08/15/fault-support-in-silverlight-3.aspx</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/dd470096(VS.95).aspx">http://msdn.microsoft.com/en-us/library/dd470096(VS.95).aspx</a></li>
<li><a href="http://blogs.msdn.com/silverlight_sdk/archive/2009/08/12/new-networking-stack-in-silverlight-3.aspx">http://blogs.msdn.com/silverlight_sdk/archive/2009/08/12/new-networking-stack-in-silverlight-3.aspx</a></li>
</ul><!--a(href='#{ conf.web_link }') Conference Homepage--><!--each session in conf.sessions--><!--  .row--><!--    .col-xs-11--><!--      h4 #{ session.title }--><!--      p #{ session.abstract }--><!--      if session.assets--><!--        ul--><!--          each asset in session.assets--><!--            li--><!--              a(href='#{ asset.link }') #{ asset.title }--></div></div><hr><div id="disqus_thread"></div></div></div></div><div class="col-sm-3"><div class="panel panel-default"><div class="panel-heading">Recent Posts</div><div class="panel-body"><ul><li><a href="/technology/2014/you-cant-handle-the-truth">You Can't Handle The Truth</a></li><li><a href="/technology/2014/codestock-2014">CodeStock 2014</a></li><li><a href="/technology/2014/tracking-planes-on-vacation">Tracking Planes on Vacation</a></li><li><a href="/technology/2014/book-review-learning-windows-mobile-services-for-win-8-and-win-phone-8">Book Review: Learning Windows Mobile Services for Win 8 and Win Phone 8</a></li><li><a href="/technology/2014/codemash-2014">CodeMash 2014</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading">Older Posts</div><div class="panel-body"><ul><li><a href="/technology/2014/">2014 Posts</a></li><li><a href="/technology/2013/">2013 Posts</a></li><li><a href="/technology/2012/">2012 Posts</a></li><li><a href="/technology/2011/">2011 Posts</a></li><li><a href="/technology/2010/">2010 Posts</a></li><li><a href="/technology/2009/">2009 Posts</a></li><li><a href="/technology/2008/">2008 Posts</a></li><li><a href="/technology/2007/">2007 Posts</a></li><li><a href="/technology/2006/">2006 Posts</a></li><li><a href="/technology/2005/">2005 Posts</a></li><li><a href="/technology/2004/">2004 Posts</a></li></ul></div></div></div></div></div></div><div id="footer"><div class="container"><p class="text-muted credit"><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a> This work is licensed under a<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"> Creative Commons Attribution 4.0 International License</a>.</p></div></div><script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script type="text/javascript" src="/assets/site.js"></script></body></html>